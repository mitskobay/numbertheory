<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>The Euclidean Algorithm on Square Roots</title>

  <style>
    input {
      height: 1rem;
      width: 3rem;
      margin-bottom: 0.5rem;
    }
  </style>
  <script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(','\\)']]
      },
      svg: {
        fontCache: 'global'
      }
    };
  </script>
  <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
</head>
<body>
  <p>This page will calculate the Euclidean algorithm between $\sqrt d$ and $1$.</p>

  <p>We first determine the continued fraction expansion using Euler's algorithm.</p>

  <h3>Euler's Algorithm</h3>
  <p>Euler's algorithm finds the continued fraction expansion $[a_0,a_1,\dots]$ of a quadratic irrational
    \[\frac{\sqrt d+b_0}{c_0}\]
    such that $c_0\mid d-b_0^2$. To initialize the algorithm, we set
    \[a_0=\left\lfloor\frac{\sqrt d+b_0}{c_0}.\right\rfloor\]
    Then we successively calculate
    \[b_{n+1}=a_nc_n-b_n,\quad c_{n+1}=\frac{d-b_{n+1}^2}{c_n},\quad a_{n+1}=\left\lfloor\frac{\sqrt d+b_{n+1}}{c_{n+1}}.\right\rfloor \]
  In the special case $b_0=0, c_0=1$ so that the quadratic irrational is $\sqrt d$, Euler streamlined the calculation of $a_{n+1}$ by observing that in this case
  \[b_{n+1}=\left\lfloor\frac{\lfloor\sqrt d\rfloor+b_{n+1}}{c_{n+1}}.\right\rfloor\]
  so that only integer calculations are involved.
  </p>

  <label for="d">Calculate the continued fraction expansion of $\sqrt d$ out to $n$ terms (default $n=5$):</label>
  <input type="number" id="d" name="d" placeholder="d">
  <input type="number" id="n" name="n" placeholder="n">
  <button>Submit</button>
  <p id="dresult"></p>
  <script>
    const dbtn = document.querySelector('button');
    const dinput = document.querySelector('#d');
    const ninput = document.querySelector('#n');
    const dresult = document.querySelector('#dresult');

    dbtn.addEventListener('click', () => {
      const dValue = dinput.value;
      var nValue = ninput.value;
      if(!ninput || !nValue) nValue=5;

      const a0 = Math.floor(Math.sqrt(dValue));
      var a = a0;
      var b = 0;
      var c = 1;
      const d = dValue;

      var terms = `$[${a}`;
      for(let i = 0; i<nValue; i++){
        b=a*c-b;
        c=(d-b*b)/c;
        a=Math.floor((a0+b)/c);
        terms += `, ${a}`;
      }
      terms += `,\\dots]$`;

      dresult.innerHTML = terms;
      MathJax.typesetPromise();
    })
  </script>
</body>
</html>